{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.querySelector('#datetime-picker');\nconst button = document.querySelector('button');\nconst countDays = document.querySelector('[data-days]');\nconst countHours = document.querySelector('[data-hours]');\nconst countMinutes = document.querySelector('[data-minutes]');\nconst countSeconds = document.querySelector('[data-seconds]');\n\nbutton.disabled = true;\nbutton.addEventListener('click', onTimerStart);\n\nlet userSelectedDate;\nlet countdown;\n\nconst options = {\n    // enableTime - enables time picker\n    enableTime: true,\n    // time_24hr - displays time picker in 24 hour mode without AM/PM selection when enabled\n    time_24hr: true,\n    // defaultDate - sets the initial selected date(s);\n    // new Date() - sets current date\n    defaultDate: new Date(),\n    // minuteIncrement - adjusts the step for the minute input(incl.scrolling)\n    minuteIncrement: 1,\n    // onClose - function(s) to trigger on every time the calendar is closed\n    onClose(selectedDates) {\n        if (selectedDates[0] <= Date.now()) {\n            button.disabled = true;\n            iziToast.error({\n                title: 'Error!',\n                message: 'Please choose a date in the future',\n                position: 'topRight',\n            });\n        } else {\n            button.disabled = false;\n            userSelectedDate = selectedDates[0];\n        }\n    },\n};\n\nflatpickr(input, options);\n\nfunction onTimerStart() {\n    countdown = setInterval(() => {\n        const ms = userSelectedDate - new Date();\n        convertMs(ms);\n        updateTimer(ms);\n    }, 1000);\n    button.disabled = true;\n    input.disabled = true;\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\nfunction updateTimer(ms) {\n    const { days, hours, minutes, seconds } = convertMs(ms);\n\n    if (!days && !hours && !minutes && !seconds) {\n        clearInterval(countdown);\n        input.disabled = false;\n    }\n\n    countDays.textContent = addLeadingZero(days);\n    countHours.textContent = addLeadingZero(hours);\n    countMinutes.textContent = addLeadingZero(minutes);\n    countSeconds.textContent = addLeadingZero(seconds);\n}\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, '0');\n}"],"names":["input","button","countDays","countHours","countMinutes","countSeconds","onTimerStart","userSelectedDate","countdown","options","selectedDates","iziToast","flatpickr","ms","updateTimer","convertMs","days","hours","minutes","seconds","addLeadingZero","value"],"mappings":"+IAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAS,SAAS,cAAc,QAAQ,EACxCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5DJ,EAAO,SAAW,GAClBA,EAAO,iBAAiB,QAASK,CAAY,EAE7C,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CAEZ,WAAY,GAEZ,UAAW,GAGX,YAAa,IAAI,KAEjB,gBAAiB,EAEjB,QAAQC,EAAe,CACfA,EAAc,CAAC,GAAK,KAAK,IAAG,GAC5BT,EAAO,SAAW,GAClBU,EAAS,MAAM,CACX,MAAO,SACP,QAAS,qCACT,SAAU,UAC1B,CAAa,IAEDV,EAAO,SAAW,GAClBM,EAAmBG,EAAc,CAAC,EAEzC,CACL,EAEAE,EAAUZ,EAAOS,CAAO,EAExB,SAASH,GAAe,CACpBE,EAAY,YAAY,IAAM,CAC1B,MAAMK,EAAKN,EAAmB,IAAI,KAElCO,EAAYD,CAAE,CACjB,EAAE,GAAI,EACPZ,EAAO,SAAW,GAClBD,EAAM,SAAW,EACrB,CAEA,SAASe,EAAUF,EAAI,CAQnB,MAAMG,EAAO,KAAK,MAAMH,EAAK,KAAG,EAE1BI,EAAQ,KAAK,MAAOJ,EAAK,MAAO,IAAI,EAEpCK,EAAU,KAAK,MAAQL,EAAK,MAAO,KAAQ,GAAM,EAEjDM,EAAU,KAAK,MAASN,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASL,EAAYD,EAAI,CACrB,KAAM,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYJ,EAAUF,CAAE,EAElD,CAACG,GAAQ,CAACC,GAAS,CAACC,GAAW,CAACC,IAChC,cAAcX,CAAS,EACvBR,EAAM,SAAW,IAGrBE,EAAU,YAAckB,EAAeJ,CAAI,EAC3Cb,EAAW,YAAciB,EAAeH,CAAK,EAC7Cb,EAAa,YAAcgB,EAAeF,CAAO,EACjDb,EAAa,YAAce,EAAeD,CAAO,CACrD,CAEA,SAASC,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C"}